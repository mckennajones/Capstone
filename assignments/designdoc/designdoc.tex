%\documentclass[letterpaper,10pt,titlepage]{IEEEtran}
%\documentclass[10pt, oneside,onecolumn,draftclsnofoot]{IEEEtran}
\documentclass[10pt,journal,compsoc,onecolumn, draftclsnofoot]{IEEEtran}

\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}

\usepackage{alltt}
\usepackage{float}
\usepackage{color}
\usepackage{url}

\usepackage{balance}
\usepackage[TABBOTCAP, tight]{subfigure}
\usepackage{enumitem}
\usepackage{pstricks, pst-node}

\usepackage{geometry}
\usepackage{pst-gantt}
\usepackage{tabu}

\geometry{textheight=8.5in, textwidth=6in}

%random comment

\newcommand{\cred}[1]{{\color{red}#1}}
\newcommand{\cblue}[1]{{\color{blue}#1}}

\usepackage{hyperref}
\usepackage{geometry}
\usepackage{array}
\usepackage{titling}

\def\name{Jake Jeffreys, McKenna Jones, Spike Madden, Sean Marty}
\title{
EmbarkVR: Outdoor Virtual Reality Experience \\
CS Senior Capstone \\
Design Document\\
\vspace{3cm}
}
\author{Jake Jeffreys, McKenna Jones, Spike Madden, Sean Marty}
\date{November 17th, 2016}

%pull in the necessary preamble matter for pygments output

%% The following metadata will show up in the PDF properties
\hypersetup{
  colorlinks = true,
  linkcolor = black,
  urlcolor = black,
  pdfauthor = {\name},
  pdfkeywords = {cs461 ``senior capstone''},
  pdftitle = {CS 461 Design Document},
  pdfsubject = {CS 461 Design Document},
  pdfpagemode = UseNone
}

\begin{document}
\begin{titlepage}
\vspace{3cm}
\maketitle
\vspace{3cm}
\begin{abstract}
Abstract Goes Here
\end{abstract}

\end{titlepage}
\tableofcontents
\clearpage

\section{Overview}
\subsection{Scope}
We want to create an outdoor virtual reality experience for customers at a Columbia retail store. The application will consist mainly of visual, audio, and tactile experiences to create an outdoor world in which the user can navigate. The main activity available will involve fly fishing in one of the rivers within the environment. Users will also have the ability to interact with virtual Columbia products while in the experience and gain specific product information.

\subsection{Purpose}
The main goal of the project is to make customers feel more inclined to purchase Columbia gear through the use of an immersive, outdoor Virtual Reality experience. This document exists both for development of the project and to provide a detailed description of the design plans.

\subsection{Intended Audience}
The intended audience of this design document are the student developers involved (EmbarkVR), project sponsors, and Capstone teachers. The development team will be using this report as a guide and will provide structure for the development process. The sponsors can use this document to understand the vision of the developers and to will give a platform to discuss design ideas. The teachers can benefit from this document by learning about the project as a whole.

\section{Definitions}
\begin{itemize}
  \item Virtual Reality (VR):  Artificial environment that is created with software
  \item HTC Vive: A virtual reality headset produced by HTC
  \item Base Stations: These allow the Vive to track the movement and location of the wands and headset.
  \item Wands: Controllers that are used with the HTC headset.
  \item Unity Game Engine: The Unity Game Engine, developed by Unity Technologies is used in this project to develop the virtual reality simulation.
  \item GameObject: The base class for all entities in Unity scences.
  \item GitHub: Web-based Git repository hosting service
  \item Git: version control system used for software development
\end{itemize}


\section{Project Context}
\subsection{Hardware}
\begin{itemize}
  \item Laptop Computers with the following specifications:
  \begin{itemize}
    \item Processor: Intel Core i5-4590 or AMD FX 8350, or better
    \item Graphics: NVIDIA GeForce GTX 1060 or AMD Radeon RX480, or better
    \item Memory: 4GB RAM or better
    \item Operating system: Windows 7 SP1 or better
  \end{itemize}
  \item HTC Vive Headset: Used to track head movements and display application to users.
  \item HTC Wands (x2): Used to track the users hand movements and to give the user the ability to interact with virtual objects within the application.
  \item HTC Base Stations (x2): Used to track location of headset and wands. This is information is then sent back to the computer in real time.
\end{itemize}
\subsection{Software}
\begin{itemize}
  \item Unity Gaming Engine: Used to develop the application.
  \item Unity Asset Store: Used to find objects which can be imported into the application.
  \item GitHub: Used by developers to collaborate and share files.
\end{itemize}


\section{Design Description}

\subsection{Design stakeholders}
\subsubsection{Intel}
Intel is working with Columbia Sportwear to help them meet their needs when it comes to this Outdoor Simulation Project.
Intel has graciously provided all necessary hardware to our team to allow us to create a successful application.

\subsubsection{Columbia Sportswear}
One aspect of Columbia Sportwear is their fishing apparel.
Specifically, the Performace Fishing Gear (PFG) line of apparel.
Columbia hopes to use the application we are developing in a retail store to showcase the PFG line in a new medium.
The goal is inspire customers to try new outdoor activities with Columbia gear.

\subsection{Design views}
\subsubsection{Users}
Users of the product expect this virtual reality experience to be as realistic and immersive as possible. We will be making the assumption that users will be experiencing this application with out any previous virtual reality or fly fishing experience. We are making the assumption to account for everyone who may be interested in participating. From their perspective, they will care most about their ability to quickly understand how to move around and interact with objects. This means that we need to create intuitive tools and controls. Users can also expect to find visual queues and instructions within the experience.

There are two main perspectives that users will have when using this product.
Firstly, users will be hoping to gain an outdoor experience that they might not otherwise have the opportunity to try. Therefore, realism is key in this view.
Secondly, users will expect interaction with Columbia gear in a meaningful way.
The user should leave the experience with a feeling of how the Columbia gear would perform in a certain environment.


\subsubsection{Intel Sponsor (Mike Premi)}
The Intel sponsor of the project, Mike Premi, is concerned more with the technical side of the project.
Things like which technologies are used, the techical performance, and overall technical design considerations are important under this view.
This view will guide the design process on a technical level.

One of the main goals of the project is to make the experience as immersive and real as possible. To achieve this we will first need to use a high performance computer. Second, we will need to constantly be aware of performance restrictions during the development process, mainly while improving realism. The realism techniques we discuss later in this document will all take a toll on performance speeds and application responsivess.

\subsubsection{Columbia Sponsor (Tim Devlin)}
The Columbia Sportwear sponsor of the project, Tim Devlin, is concerened primarily with the how the user will interact with Columbia products in the Virtual Reality experience.
This includes, how products are displayed, what information related to the products is shown, and the user interaction with said products.
Ultimately, the goal of the product under this view is to create more sales for Columbia Sportswear.
Therefore, that is what is most important under this view.
This view will gude the design process of a higher level compared to the Intel Sponsor view.

\subsection{Design viewpoints}
\subsubsection{Context viewpoint}
This context is related to user interaction with the application in its
environment. It provides a "black box" view of the project which can be useful
from the perspective of developers.
\begin{itemize}
  \item Design Concern: The main concern will come from users of the VR
  application. Users will only be able to see the outside of the application
  and their ability to interact seemlessly is essential. Users do not want to
  experience performance lag or errors in functionality.
  \item Analytical Methods: The design will be evaluated during user testing on
  the basis on immersion, enjoyment, and possibly influence over customers
  decisions. After users test the application we will ask for feedback related
  their experience.
  \item Rationale: We included this viewpoint due to the importance of user
  immersion. The user experience in Virtual Reality applications is very
  sensitive and there are a lot of factors that can influence it.
\end{itemize}
\subsubsection{Composition viewpoint}
Project composition is the organization of, and relationships between, each of
the sections of our project. Each portion of the project will be explored in
more detail in the Approach section below, but our virtual reality experience
will be the sum of visual and audio assets, scripts, game objects, and HTC Vive
hardware. All of this will be integrated to create a single, powerful retail
experience.
\begin{itemize}
  \item Design Concern: The composition of the project affects ease of
  implementation, performance, and how well an outside developer can come in
  and familiarize themselves with the project. Intel Sponsor Mike Premi will
  find this viewpoint important because of his role in guiding our technical
  development. Also, Columbia Sponsor Tim Devlin will find this viewpoint
  valuable because once the product is handed over to be applied in a retail
  setting, a well-composed project will ease this transistion and replication.
  \item Analytical Methods: It will be hard to objectively analyze the success
  of this viewpoint, but the effects of a well or poorly composed project will
  undoubtable be seen throughout development and implementation. A good test of
  quality composition will occur whenever parts of the project need to be
  passed from one team member to another, or from the team to an outside
  developer. Project composition will be one of the factors in how well these
  transfers go.
  \item Rationale: We included the composition viewpoint because there are
  going to be a massive number of assets, scripts, and objects involved in the
  production of this virtual reality experience. It is vital to have our design
  keep an eye on composition so that nothing gets lost in the complexity of the
  undertaking. Also, as our team learns and improves our product, there will be
  periods of redesigning and modification that need to stay within the planned
  composition in order not to break other portions of the project.
\end{itemize}
\subsubsection{Dependency viewpoint}
*[The Dependency viewpoint specifies the relationships of interconnection and access among entities. These relationships include shared information, order of execution, or parameterization of interfaces.]*
\begin{itemize}
  \item Design Concern:
  \item Analytical Methods
  \item Rationale
\end{itemize}
\subsubsection{Interface viewpoint}
*[Interface viewpoint provides information designers, programmers, and testers the means to know how to correctly use the services provided by a design subject. This description includes the details of external and internal interfaces not provided in the SRS.]*
\begin{itemize}
  \item Design Concern:
  \item Analytical Methods
  \item Rationale
\end{itemize}


\section{Approach}
\subsection{Static Environment}
(terrain, static objects, Columbia gear assets)

\subsection{Improve Realism and Animate Environment}
One of the main goals of our project is to make it as realistic as possible
without compromising performance. Realism can come from a number of different
techniques. The first we will be focusing on is environment animation. A
majority of our application will take place in a river so we will need to make
this river as animated as possible. THis will involve an animation of the
water moving passed the users and can be done using one of the open-source
animated water shadings. A similar technique can be used to create movement of
clouds in the sky.

The next step to improving realism is adding audio. Audio is crucial when it
comes to immersion so not only will we need to add water noises but also noises
related to wind and a wide range of animals. In Unity, sounds originate from
Audio Source attached to objects. Those sounds and audio clips can be found in
any open-source audio library and easily imported into Unity. The last
technique we will be focusing to improve realism is lighting and shadowing.
This can be achieved using the built-in directional lighting tools within Unity.

\subsection{Tactile User Interaction}
The central idea behind this project is to promote Columbia gear in a realistic fly fishing experience. This requires the virtual reality project to allow for the user to interact with various pieces of Columbia gear. Along with direct interaction with apparel within the virtual reality world, the project should provide a menu to display detailed information on specific Columbia Sportswear products.

User interaction with Columbia gear will most likely be through various avatars placed in the virtual reality environment. Since the Vive doesn't allow for body tracking with just the wands, our sponsor steered us away from having Columbia apparel on the user's avatar. Users will be able to inspect and interact with the avatars that are showcasing the Columbia gear.

To achieve this, Columbia apparel assets and animations will be imported into the project. The avatars and Columbia apparel pieces will be animated using Unity's animation system, Mecanism. Mecanism uses Animation Clips which store information on how objects should adjust their position and other properties over time. These clips can come from third party digital content creation packages, motion capture studios or can be created within Unity. Animation Clips can be considered the building blocks for all animation sequences in Unity. These building blocks are organized into Mecanim's Animator Controller to chain various animations together. The Controller keeps track of the Animation Clips in a flowchart system and behaves like a state machine that keeps track of current Animation Clips and when they should change. The Controller is also capable of blending multiple clips to provide smooth transitions between animations. The Animation Clips and Animator Controller are aggregated into a GameObject through the Animator Component.

In addition to allowing users to interact with Columbia gear within the experience, Columbia product details need to be displayed to the user. This menu system needs to be onobtrusive in order to preserve the immersion of the experience. This will be done through the use of Unity's in build UI element - the panel. The panels will include an image of the product, its specifications and an "Add to Cart" option.

\subsection{Rod mechanics}
In order to create a realistic fishing experience, the user will need to be able to interact with a virtual fishing rod.
The user's interaction with the rod will be primarily based around the use of the HTC Vive controllers.
Like other virtual reality simulations, in the game you will not see the Vive controllers, but instead virtual hands.
The user will then be able to pick up the fishing rod using these virtual hands.
To make this interaction as natural as possible the VR hands need to feel like an actual extension of the user's body.
Once the user has picked up the fishing rod, it needs to behave as an actual rod would.
This means that we will be using Unity's 3D physics engine extensively to create realistic movements with the fishing rod, line, and bait.

The hands models can easily be downloaded from the Unity Asset store, where there are both free and paid options.
Once these have been downloaded the next step is top map these to the Vive controllers.
This is done by deleting the controller model in the controller GameObject and replacing it with the appropriate asset.
The next step is to allow interaction between the controller and the fishing rod.
To pick up objects in the environment the user will use the trigger on the controller.
This will be implimented by first monitoring for the trigger when the controller is near a GameObject.
When we detect and instance of this, the objects position can then be set to the same position as the Vive controller.

Creating ropes and cables in Unity is non-trivial.
The prefered method is to use physics joints.
Physics joints, and specifically many hinge joints can be used to create the fishing line.
The hinge joint game object is highly configurable, so the settings will need to be tweaked to create a realistic looking fishing line.
For the fishing rod, hinge joints can also be used.
Creating the physics to mimic the flex of a fishing rod is a matter of tweaking primarily the use limits of the hinge joints.
The use limits determine the minimum and maximum angle to which a hinge joint may bend.
In the case of the fishing line, the hinge joints have no limits because a fishing line can bend in any way.
A fishing rod however, can only bend to a certain point.
One can also controller the bounciness of joints, which determines how much the object bounces when it hits the use limit.
This will also be tweaked to control the flex of the rod.

% \bibliographystyle{IEEEtran}
% \bibliography{designdoc}
\end{document}
